<UserControl x:Class="LearnHub.App.Views.SettingsView"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:converters="clr-namespace:LearnHub.App.Converters">
    <UserControl.Resources>
        <converters:StatusColorConverter x:Key="StatusColorConverter"/>
        <Style x:Key="CardStyle" TargetType="Border">
            <Setter Property="Background" Value="#FFFFFF"/>
            <Setter Property="BorderBrush" Value="#E0E0E0"/>
            <Setter Property="BorderThickness" Value="1"/>
            <Setter Property="CornerRadius" Value="8"/>
            <Setter Property="Padding" Value="24"/>
            <Setter Property="Margin" Value="0,0,0,16"/>
            <Setter Property="Effect">
                <Setter.Value>
                    <DropShadowEffect Color="#40000000" Direction="270" ShadowDepth="2" BlurRadius="8" Opacity="0.1"/>
                </Setter.Value>
            </Setter>
        </Style>
        <Style x:Key="SectionTitleStyle" TargetType="TextBlock">
            <Setter Property="FontSize" Value="20"/>
            <Setter Property="FontWeight" Value="SemiBold"/>
            <Setter Property="Foreground" Value="#1A1A1A"/>
            <Setter Property="Margin" Value="0,0,0,20"/>
        </Style>
        <Style x:Key="LabelStyle" TargetType="TextBlock">
            <Setter Property="FontSize" Value="14"/>
            <Setter Property="FontWeight" Value="SemiBold"/>
            <Setter Property="Foreground" Value="#333333"/>
            <Setter Property="Margin" Value="0,0,0,8"/>
        </Style>
        <Style x:Key="ModernButtonStyle" TargetType="Button">
            <Setter Property="Background" Value="#0078D4"/>
            <Setter Property="Foreground" Value="White"/>
            <Setter Property="BorderThickness" Value="0"/>
            <Setter Property="Padding" Value="16,10"/>
            <Setter Property="FontSize" Value="14"/>
            <Setter Property="FontWeight" Value="SemiBold"/>
            <Setter Property="Cursor" Value="Hand"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="Button">
                        <Border Background="{TemplateBinding Background}" 
                                CornerRadius="6" 
                                Padding="{TemplateBinding Padding}">
                            <ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center"/>
                        </Border>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
            <Style.Triggers>
                <Trigger Property="IsMouseOver" Value="True">
                    <Setter Property="Background" Value="#0063B1"/>
                </Trigger>
                <Trigger Property="IsEnabled" Value="False">
                    <Setter Property="Background" Value="#CCCCCC"/>
                    <Setter Property="Foreground" Value="#666666"/>
                </Trigger>
            </Style.Triggers>
        </Style>
        <Style x:Key="ModernTextBoxStyle" TargetType="TextBox">
            <Setter Property="Padding" Value="12,10"/>
            <Setter Property="FontSize" Value="14"/>
            <Setter Property="BorderBrush" Value="#D0D0D0"/>
            <Setter Property="BorderThickness" Value="1"/>
            <Setter Property="Background" Value="#FAFAFA"/>
            <Style.Triggers>
                <Trigger Property="IsFocused" Value="True">
                    <Setter Property="BorderBrush" Value="#0078D4"/>
                    <Setter Property="Background" Value="White"/>
                </Trigger>
            </Style.Triggers>
        </Style>
        <Style x:Key="InfoTextStyle" TargetType="TextBlock">
            <Setter Property="FontSize" Value="13"/>
            <Setter Property="Foreground" Value="#666666"/>
            <Setter Property="TextWrapping" Value="Wrap"/>
            <Setter Property="LineHeight" Value="20"/>
        </Style>
        <Style x:Key="StatusTextStyle" TargetType="TextBlock">
            <Setter Property="FontSize" Value="13"/>
            <Setter Property="Margin" Value="0,8,0,0"/>
        </Style>
    </UserControl.Resources>
    
    <ScrollViewer VerticalScrollBarVisibility="Auto" Background="#F5F5F5">
        <StackPanel Margin="24">
            <TextBlock Text="Settings" 
                       FontSize="32" 
                       FontWeight="Bold" 
                       Foreground="#1A1A1A"
                       Margin="0,0,0,24"/>

            <!-- yt-dlp Configuration -->
            <Border Style="{StaticResource CardStyle}">
                <StackPanel>
                    <TextBlock Text="Video Download Configuration" Style="{StaticResource SectionTitleStyle}"/>
                    
                    <TextBlock Text="yt-dlp Executable Path" Style="{StaticResource LabelStyle}"/>
                    <Grid>
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="*"/>
                            <ColumnDefinition Width="Auto"/>
                        </Grid.ColumnDefinitions>
                        <TextBox Grid.Column="0" 
                                 Text="{Binding YtDlpPath, UpdateSourceTrigger=PropertyChanged}" 
                                 Style="{StaticResource ModernTextBoxStyle}"
                                 Margin="0,0,12,0"/>
                        <Button Grid.Column="1" 
                                Content="Detect" 
                                Command="{Binding DetectCommand}"
                                Style="{StaticResource ModernButtonStyle}"
                                MinWidth="120"/>
                    </Grid>
                    
                    <TextBlock Text="{Binding DetectionMessage}" 
                               Style="{StaticResource StatusTextStyle}"
                               Foreground="{Binding DetectionMessage, Converter={StaticResource StatusColorConverter}}"/>
                    
                    <Border Background="#FFF4E6" 
                            BorderBrush="#FFB366" 
                            BorderThickness="1" 
                            CornerRadius="6" 
                            Padding="16" 
                            Margin="0,16,0,0">
                        <StackPanel>
                            <TextBlock Text="⚠️ Important Notice" 
                                       FontWeight="SemiBold" 
                                       FontSize="14"
                                       Foreground="#CC6600"
                                       Margin="0,0,0,8"/>
                            <TextBlock Style="{StaticResource InfoTextStyle}" 
                                       Foreground="#CC6600">
                                Downloads are only allowed when you have the legal rights or permissions to download the content. 
                                Please ensure you comply with the terms of service of the platforms you are downloading from.
                            </TextBlock>
                        </StackPanel>
                    </Border>
                </StackPanel>
            </Border>

            <!-- About Section -->
            <Border Style="{StaticResource CardStyle}">
                <StackPanel>
                    <TextBlock Text="About LearnHub" Style="{StaticResource SectionTitleStyle}"/>
                    <TextBlock Style="{StaticResource InfoTextStyle}">
                        LearnHub is an AI-powered research and learning platform that helps you discover trusted sources, 
                        browse educational content, and generate structured learning plans.
                    </TextBlock>
                </StackPanel>
            </Border>
        </StackPanel>
    </ScrollViewer>
</UserControl>
